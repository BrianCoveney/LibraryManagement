<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head lang="en" th:replace="fragments/head :: head"></head>
<body>
<header th:replace="fragments/header :: header"></header>
<main>
    <h3 class="search-title">Find book(s) by author:</h3>

    <form id="form1" action="#" th:action="@{/search}" th:object="${bookAuthor}">
        <input name="book" id="search" type="text" placeholder="Author name">
        <input id="submit" class="button" type="submit" value="Search" />
        </input>
        <div th:if="${not #lists.isEmpty(bookAuthor)}">
          <h3>Search results:</h3>
          <table class="members-table">
            <tr>
              <th>Title</th>
              <th>Author</th>
            </tr>
            <tr th:each="b: ${bookAuthor}">
              <td th:text="${b.title}">No Title!</td>
              <td th:text="${b.author}">No Author!</td>
            </tr>
          </table>
        </div>
    </form>
    <form id="form2" action="#" th:action="@{/search}" th:object="${booksAll}">
        <input type="button" class="button" id="find-all-button" value="Show All Books" onclick="findAllButtonClick()" />
        <div id="all-books-cont" style="display: none">
        <h3 id="all-books">All books:</h3>
        <table class="members-table">
          <tr>
            <th>Title</th>
            <th>Author</th>
          </tr>
          <tr th:each="b: ${booksAll}">
            <td th:text="${b.title}">No Title!</td>
            <td th:text="${b.author}">No Author!</td>
          </tr>
        </table>
        </div>
    </form>

</main>
<footer th:replace="fragments/footer :: footer"></footer>

<script>
    function findAllButtonClick() {
        var booksDivContainer = document.getElementById("all-books-cont");
        var toggleButton = document.getElementById("find-all-button");

        if(booksDivContainer.style.display === "none") {
            booksDivContainer.style.display = "block";
        } else {
            booksDivContainer.style.display = "none";
        }

        if (toggleButton.value === "Show All Books") {
            toggleButton.value = "Hide All Books"
        } else {
            toggleButton.value = "Show All Books"
        }
    }
</script>

</body>
</html>
